<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success invite cookie</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <header class="text-white text-center py-4">
        <h1 id="home-heading" class="display-4">!שמחים שחזרת 
</h1>
<br>
<input type="text" id="name" class="text-center" name="name" required><label for="name" class="text-white display-6 "  >:  שם</label>
            
            <p>ברוך הבא לאתר הזמנת עוגיות תוצרת בית - יפה יעקב</p>
            
                <hr>
        <p class="main">.שמחים שחזרת לקנות ממגוון העוגיות והסגונונות , הבחירה תשלח ישירות אל הוואטצאפ בהודעה</p>
    </header>
    <h2 id="h2" class="text-white text-center col-sm-10 " >hello</h2>
    <div id="container" class="container" >
        <div class="row col-md-12 col-sm-4 col-lg-12 ">
            <div class="col-lg-4 col-sm-12">
                <div class="card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUq-1biyj-fG8_YxsDGboV-MI_jvmMkKeLt7wO454tKouR8J3bk5aT20tO8iDSv2c52WM&usqp=CAU"  alt="מלוחות">
                    <div class="card-body">
                        <h3 class="card-title">עוגיות מלוחות</h3>
                        <p class="card-text"><input id="saltCque" type='number' min='0' max='30' step='5' placeholder='0'> : כמות</p>
                        <h3>סה"כ : <span id='numSlat'>0</span></h3>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-sm-12">
                <div class="card">
                    <img src="ML.jpeg" alt="מכונה">
                    <div class="card-body">
                        <h3 class="card-title">עוגיות מכונה</h3>
                        <p class="card-text"><input id="Mque" type='number' min='0' max='30' step='5' placeholder='0'> : כמות</p>
                        <h3>סה"כ : <span id='numMachine'>0</span></h3>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-sm-12">
                <div class="card">
                    
                    <img src="תמרים.jpeg"  alt="תמרים/שוקולד">
                    <div class="card-body">
                        <h3 class="card-title">מגולגלות</h3>
                        <p class="card-text"><input id="Rque" type='number' min='0' max='30' step='5' placeholder='0'> : כמות</p>
                        <p>
                            <select id="selectMenu" >
                    <option value="שוקולד">שוקולד</option>
                    <option value="תמרים">תמרים</option> </select> : מילוי
                        <h3>סה"כ : <span id='numRoll'>0</span></h3>
                    </div>
                </div>
            </div>
            <div id='totalprice'  class="col-md-12 col-sm-12 col-lg-12"  >
                    <h4>תשלום : <span id='totalPrice'>0</span></h4>
                <div>
            <button class='btn text-black text-center btn-lg-1' style='width=380px;' id='sendmassage' onclick='sendM()'>שלח הודעה בוואטצאפ</button>
        </div>
    </div>
    
    <footer id="footer" class="text-white text-center py-3" >
        <p>&copy; 2024 - All rights reserved</p>
    </footer>
    

    <script>
        let wait_to_name = document.getElementById('name');
        let publish_name = document.getElementById('h2');
        let container = document.getElementById('container');
        let footer = document.getElementById('footer');
        
        publish_name.style.display = "none";
        container.style.display = "none";
        footer.style.display = "none";

        let OneCookieRoll = 2.20;
        let OneCookieMachine = 2.10;
        let OneCookieSlat = 1.5;
        
        

        var totalPrice = 0;


        var numMachineElement = document.getElementById('numMachine');
        var numRollElement = document.getElementById('numRoll');
        var numSlatElement = document.getElementById('numSlat');
        
         document.getElementById('Rque').addEventListener('change', function() {
        
            
            let selectedValue = parseInt(this.value);
            
                numRollElement.innerHTML = (selectedValue )*OneCookieRoll;
                updateTotalPrice(numSlatElement.innerHTML , numMachineElement.innerHTML , numRollElement.innerHTML);
        
    });
    document.getElementById('Mque').addEventListener('change',function(){
        
        let numMachineElement = document.getElementById('numMachine');
        let selectedValue = parseInt(this.value);
            
                numMachineElement.innerHTML = (selectedValue )*OneCookieMachine;
                updateTotalPrice(numSlatElement.innerHTML , numMachineElement.innerHTML , numRollElement.innerHTML);

    });
    document.getElementById('saltCque').addEventListener('change', function(){
        
        let numSlatElement = document.getElementById('numSlat');
        let selectedValue = parseInt(this.value);
            
                numSlatElement.innerHTML = (selectedValue )*OneCookieSlat;
            updateTotalPrice(numSlatElement.innerHTML , numMachineElement.innerHTML , numRollElement.innerHTML);
    });
    function updateTotalPrice(x,y,z){
        document.getElementById('totalPrice').innerHTML = parseFloat(x) + parseFloat(y) + parseFloat(z);
        totalPrice = parseFloat(document.getElementById('totalPrice').innerHTML);
        // console.log(totalPrice); 
    }
    function sendM(){
        var tasty = document.getElementById('selectMenu').value;
        const phoneNum = '972524738622';
        
        let Rque = document.getElementById('Rque').value;
        let Mque = document.getElementById('Mque').value;
        let saltCque = document.getElementById('saltCque').value;
        let username = document.getElementById('name').value;
        
        let message = ` שלום יפה , 
אני רוצה להזמין : 
, עוגיות מלוחות ${saltCque} יחידות 
, עוגיות מכונה ${Mque} יחידות 
. עוגיות מגולגלות ${Rque} יחידות בטעם ${tasty} 
העלות הכוללת היא ${totalPrice} ש"ח. 
עבור : {$username}
  תודה!` ;

// קידוד ההודעה למטרת URL
    const encodedMessage = encodeURIComponent(message);

// בניית ה-URL לשליחת ההודעה
    const whatsappURL = `https://wa.me/${phoneNum}?text=${message}`;

// הפנייה ללינק כדי לפתוח את WhatsApp עם ההודעה
    window.location.href = whatsappURL;
        
    }

    wait_to_name.addEventListener('input' , function(){
        if(wait_to_name.value.trim!== '' ){
            container.style.display = "block";
            publish_name.style.display = "block";
            footer.style.display = "block";
            publish_name.style.color = 'white';
            publish_name.style.position = 'right';
            wait_to_name.style.fontSize = '24px';
            publish_name.innerHTML = "שלום , "+ wait_to_name.value;
            
        }
        else{
            publish_name.style.display = "none";
            container.style.display = "none";
            footer.style.display = "none";
    }    
    }
)

    


    </script>
</body>
</html>
